"use strict";var acsCReqMod=angular.module("ACSCReqModuleInApp",[]);acsCReqMod.controller("ACSCReqCtrlInApp",["$scope","AdministerTestsServiceInappPIT2","$rootScope","$window",function(b,d,a,c){b.loading=false;b.pageloaded=true;b.componentType="ACS";b.applnId="PIT2";b.msgType="CReq";b.testCaseType="01";b.selectedTestCase;b.testCaseName;b.expectedTCResult=[];b.pitAction;b.cReqTemplate;b.compliance;b.previousTestCase;b.pitActions=["None","Include newlines in BASE64"];b.expectedResponses=[{value:"3-D Secure Error Message",selected:false},{value:"Authentication Status = Y",selected:false},{value:"Authentication Status = A",selected:false},{value:"Authentication Status = N",selected:false},{value:"Transaction Status = Y",selected:false},{value:"Transaction Status = N",selected:false},{value:"Transaction Status = A",selected:false},{value:"Transaction Status = C",selected:false},{value:"Transaction Status = R",selected:false}];b.selectedTestCaseObj={};b.optionExpectedRes;b.actionTemplates=[];b.isExistingTC=false;b.jsonFormat=function(g){if(g=="CReq"){var e=b.cReqTemplate;b.cReqTemplate=vkbeautify.json(e,1)}if(g=="expCReqResp"){var f=b.expectedResMsg;b.expectedResMsg=vkbeautify.json(f,1)}};b.jsonUnformat=function(g){if(g=="CReq"){var e=b.cReqTemplate;b.cReqTemplate=vkbeautify.jsonmin(e)}if(g=="expCReqResp"){var f=b.expectedResMsg;b.expectedResMsg=vkbeautify.jsonmin(f)}};b.getTestCases=function(f,e){b.testCases=[];b.tcResData=[];b.actionTemplates=[];d.getTestCases(f,e).then(function(g){b.tcResData=g.data;if(b.tcResData.length>0){b.isExistingTC=true;angular.forEach(b.tcResData,function(i){b.testCases.push({tcId:i.testCaseId,tcDesc:i.tc_desc})});if(b.previousTestCase>0||b.previousTestCase!=null){var h=b.tcResData.map(function(i){return i.testCaseId}).indexOf(b.previousTestCase);b.selectedTestCaseObj=b.tcResData[h];b.setData(b.selectedTestCaseObj);b.previousTestCase=null}else{b.selectedTestCaseObj=b.tcResData[0];b.setData(b.selectedTestCaseObj)}}else{if(b.tcResData.length==0){b.isExistingTC=false;b.pageloaded=false;b.pitAction="None";b.cReqTemplate=""}else{b.isExistingTC=false}}})};b.getTestCases(b.msgType,b.testCaseType);b.setData=function(e){b.selectedExpResps=[];b.selectedTestCase=e.testCaseId;b.testCaseName=e.tcName;b.compliance=e.compliance;b.expectedResMsg=e.expctdRespAcs;if(e.tcActionTmpl.length>0){b.pitAction=e.tcActionTmpl[0].actnTemplName}if(e.expectedMshg.length>0){angular.forEach(e.expectedMshg,function(f){b.selectedExpResps.push(f.exptRespDesc)})}b.cReqTemplate=e.templeteMsg;b.pageloaded=false};b.changeTCReqData=function(f){var e=b.tcResData.map(function(g){return g.testCaseId}).indexOf(f);if(e!=-1){b.isExistingTC=true;b.selectedTestCaseObj=b.tcResData[e];b.setData(b.selectedTestCaseObj)}else{b.isExistingTC=false;b.selectedTestCase="";b.testCaseName="";b.pitAction="None";b.actionTemplates=[];b.expectedResMsg="";b.cReqTemplate="";b.selectedExpResps=[]}};b.acsCReqSubmit=function(g,h){b.actionTemplates=[];b.actionTemplates.push(b.pitAction);var i={operationType:g,testCaseId:b.selectedTestCase,tcName:b.testCaseName,templeteMsg:b.cReqTemplate,actnTemplName:b.actionTemplates,expctdRespAcs:b.expectedResMsg,exptRespDesc:b.selectedExpResps,componentType:b.componentType,applnId:b.applnId,msgType:b.msgType,deviceChannel:b.testCaseType,compliance:b.compliance};b.loading=true;d.createNewTestCase(i).then(function e(j){b.loading=false;b.getTestCases(b.msgType,b.testCaseType);a.showErrorAlert=false;a.showSuccessAlert=true;if(g=="create"){a.successMessage="ACS CReq InApp test case '"+b.testCaseName+"' created"}else{if(g=="update"){a.successMessage="ACS CReq InApp test case '"+b.testCaseName+"' updated";b.previousTestCase=b.selectedTestCase}else{if(g=="delete"){a.successMessage="ACS CReq InApp test case '"+b.testCaseName+"' deleted"}}}c.scrollTo(0,0)},function f(j){b.loading=false;a.showSuccessAlert=false;a.showErrorAlert=true;if(j.data.errorMessage!=null){a.errorMessage=j.data.errorMessage}else{a.errorMessage="Transaction Failed"}c.scrollTo(0,0)})};b.deleteConfirm=function(){if(c.confirm("Are you sure you want to delete '"+b.testCaseName+"' test case")){b.acsCReqSubmit("delete")}};b.optionExpRes=function(){d.getUseTemplate().then(function(e){b.expectedResMsg=vkbeautify.json(e.data)})};b.expRespJsonFormat=function(){var e=b.expectedResMsg;if(b.expectedResMsg!=""&&b.expectedResMsg!=null){b.expectedResMsg=vkbeautify.json(e,1)}else{return}};b.expRespJsonUnformat=function(){var e=b.expectedResMsg;if(b.expectedResMsg!=""&&b.expectedResMsg!=null){b.expectedResMsg=vkbeautify.jsonmin(e)}else{return}}}]);