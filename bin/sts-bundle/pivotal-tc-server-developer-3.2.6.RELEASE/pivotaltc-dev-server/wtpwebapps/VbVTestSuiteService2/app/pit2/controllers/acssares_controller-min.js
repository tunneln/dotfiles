"use strict";var acssAResMod=angular.module("ACSSAResModule",[]);acssAResMod.controller("ACSSAResCtrl",["$scope","ACSSAResService","$rootScope","$window",function(c,b,a,d){c.loading=false;c.pageloaded=true;c.msgType="ARes";c.selectedTestCase="";c.testCaseName="";c.pan="";c.aResTemplateMsg="";c.testCases=[];c.selectedTestCaseObj={};c.successorPAResTC="";c.isExistingTC=false;c.isInApp=false;c.previousTestCase;c.getTestCases=function(){b.getTestCases(c.msgType,c.isInApp).then(function(e){c.testCases=e.data;if(c.testCases.length>0){c.isExistingTC=true;if(c.previousTestCase>0||c.previousTestCase!=null){var f=c.testCases.map(function(g){return g.testCaseId}).indexOf(c.previousTestCase);c.selectedTestCaseObj=c.testCases[f];c.setTestCaseData(c.selectedTestCaseObj);c.previousTestCase=null}else{c.selectedTestCaseObj=c.testCases[0];c.setTestCaseData(c.selectedTestCaseObj)}}else{if(c.testCases.length==0){c.isExistingTC=false;c.pageloaded=false;c.aResTemplateMsg=""}else{c.isExistingTC=false}}})};c.getTestCases();c.setTestCaseData=function(e){if(e!=undefined){c.resetTCData();c.isExistingTC=true;c.selectedTestCase=e.testCaseId;c.testCaseName=e.testCaseName;c.pan=e.pan;c.aResTemplateMsg=vkbeautify.json(e.templateMsg,2)}else{c.resetTCData()}c.pageloaded=false};c.resetTCData=function(){c.selectedTestCase="";c.testCaseName="";c.pan="";c.aResTemplateMsg="";c.selectedTestCaseObj={};c.isExistingTC=false};c.setSelectedTCData=function(f){var e=c.testCases.map(function(g){return g.testCaseId}).indexOf(f);if(e!=-1){c.selectedTestCaseObj=c.testCases[e];c.setTestCaseData(c.selectedTestCaseObj)}else{c.resetTCData()}};c.submitTestCase=function(g){var h={operationType:g,selectedTestCase:c.selectedTestCase,testCaseId:c.selectedTestCase,testCaseName:c.testCaseName,pan:c.pan,templateMsg:c.aResTemplateMsg,msgType:c.msgType,inAppTestcase:c.isInApp};c.loading=true;b.submit(h).then(function e(i){c.loading=false;a.showErrorAlert=false;a.showSuccessAlert=true;if(g=="create"){a.successMessage="ACSS ARes Browser test case '"+c.testCaseName+"' created"}else{if(g=="update"){a.successMessage="ACSS ARes Browser test case '"+c.testCaseName+"' updated";c.previousTestCase=c.selectedTestCase}else{if(g=="delete"){a.successMessage="ACSS ARes Browser test case '"+c.testCaseName+"' deleted"}}}c.getTestCases();d.scrollTo(0,0)},function f(i){c.loading=false;a.showSuccessAlert=false;a.showErrorAlert=true;if(i.data.errorMessage!=null&&i.data.errorMessage!=undefined){a.errorMessage=i.data.errorMessage}else{a.errorMessage="Transaction Failed"}d.scrollTo(0,0)})};c.deleteConfirm=function(){if(d.confirm("Are you sure you want to delete '"+c.testCaseName+"' test case")){c.submitTestCase("delete")}};c.jsonFormat=function(){var e=c.aResTemplateMsg;c.aResTemplateMsg=vkbeautify.json(e,1)};c.jsonUnformat=function(){var e=c.aResTemplateMsg;c.aResTemplateMsg=vkbeautify.jsonmin(e)}}]);