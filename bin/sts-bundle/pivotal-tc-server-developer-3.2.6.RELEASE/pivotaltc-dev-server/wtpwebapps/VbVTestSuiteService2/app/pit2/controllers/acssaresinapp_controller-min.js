"use strict";var acssAResMod=angular.module("ACSSAResModuleInApp",[]);acssAResMod.controller("ACSSAResCtrlInApp",["$scope","ACSSAResServiceInApp","$rootScope","$window",function(b,c,a,d){b.loading=false;b.msgType="ARes";b.selectedTestCase="";b.testCaseName="";b.pan="";b.aResTemplateMsg="";b.testCases=[];b.selectedTestCaseObj={};b.successorPAResTC="";b.isExistingTC=false;b.isInApp=true;b.previousTestCase;b.getTestCases=function(){c.getTestCases(b.msgType,b.isInApp).then(function(e){b.testCases=e.data;if(b.testCases.length>0){b.isExistingTC=true;if(b.previousTestCase>0||b.previousTestCase!=null){var f=b.testCases.map(function(g){return g.testCaseId}).indexOf(b.previousTestCase);b.selectedTestCaseObj=b.testCases[f];b.setTestCaseData(b.selectedTestCaseObj);b.previousTestCase=null}else{b.selectedTestCaseObj=b.testCases[0];b.setTestCaseData(b.selectedTestCaseObj)}}else{if(b.testCases.length==0){b.isExistingTC=false;b.pageloaded=false;b.aResTemplateMsg=""}else{b.isExistingTC=false}}})};b.getTestCases();b.setTestCaseData=function(e){if(e!=undefined){b.resetTCData();b.isExistingTC=true;b.selectedTestCase=e.testCaseId;b.testCaseName=e.testCaseName;b.pan=e.pan;b.aResTemplateMsg=vkbeautify.json(e.templateMsg,1)}else{b.resetTCData()}};b.resetTCData=function(){b.selectedTestCase="";b.testCaseName="";b.pan="";b.aResTemplateMsg="";b.selectedTestCaseObj={};b.isExistingTC=false};b.setSelectedTCData=function(f){var e=b.testCases.map(function(g){return g.testCaseId}).indexOf(f);if(e!=-1){b.selectedTestCaseObj=b.testCases[e];b.setTestCaseData(b.selectedTestCaseObj)}else{b.resetTCData()}};b.submitTestCase=function(g){var h={operationType:g,selectedTestCase:b.selectedTestCase,testCaseId:b.selectedTestCase,testCaseName:b.testCaseName,pan:b.pan,templateMsg:b.aResTemplateMsg,msgType:b.msgType,inAppTestCase:b.isInApp};b.loading=true;c.submit(h).then(function e(i){b.loading=false;a.showErrorAlert=false;a.showSuccessAlert=true;if(g=="create"){a.successMessage="ACSS ARes InApp test case '"+b.testCaseName+"' created"}else{if(g=="update"){a.successMessage="ACSS ARes InApp test case '"+b.testCaseName+"' updated";b.previousTestCase=b.selectedTestCase}else{if(g=="delete"){a.successMessage="ACSS ARes InApp test case '"+b.testCaseName+"' deleted"}}}d.scrollTo(0,0);b.getTestCases()},function f(i){b.loading=false;a.showSuccessAlert=false;a.showErrorAlert=true;if(i.data.errorMessage!=null){a.errorMessage=i.error.errorMessage}else{a.errorMessage="Transaction Failed"}d.scrollTo(0,0)})};b.deleteConfirm=function(){if(d.confirm("Are you sure you want to delete '"+b.testCaseName+"' test case")){b.submitTestCase("delete")}};b.jsonFormat=function(){var e=b.aResTemplateMsg;b.aResTemplateMsg=vkbeautify.json(e,1)};b.jsonUnformat=function(){var e=b.aResTemplateMsg;b.aResTemplateMsg=vkbeautify.jsonmin(e)}}]);