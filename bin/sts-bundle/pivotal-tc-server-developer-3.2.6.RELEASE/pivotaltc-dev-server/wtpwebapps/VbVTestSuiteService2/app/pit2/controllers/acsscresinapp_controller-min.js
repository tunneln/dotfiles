"use strict";var acssCResMod=angular.module("ACSSCResModuleInApp",[]);acssCResMod.controller("ACSSCResCtrlInApp",["$scope","ACSSCResServiceInApp","$rootScope","$window",function(b,c,a,d){b.msgType="CRes";b.testCases=[];b.selectedTestCaseObj={};b.reqPwdCnfrmScreen=false;b.reqADSScreen=false;b.reqPwdScreen=false;b.isExistingTC=false;b.selectedReqScreen="";b.loading=false;b.isInApp=true;b.sequences=[1,2,3,4,5];b.previousTestCase;b.getTestCases=function(){c.getTestCases(b.msgType,b.isInApp).then(function(e){b.testCases=e.data;if(b.testCases.length>0){b.isExistingTC=true;if(b.previousTestCase>0||b.previousTestCase!=null){var f=b.testCases.map(function(g){return g.testCaseId}).indexOf(b.previousTestCase);b.selectedTestCaseObj=b.testCases[f];b.setTestCaseData(b.selectedTestCaseObj);b.previousTestCase=null}else{b.selectedTestCaseObj=b.testCases[0];b.setTestCaseData(b.selectedTestCaseObj)}}else{if(b.testCases.length==0){b.isExistingTC=false;b.pageloaded=false;b.cResTemplateMsg=""}else{b.isExistingTC=false}}})};b.getTestCases();b.setTestCaseData=function(e){if(e!=undefined){b.resetTCData();b.isExistingTC=true;b.selectedTestCase=e.testCaseId;b.testCaseName=e.testCaseName;b.pan=e.pan;b.sequence=e.sequence;b.cResTemplateMsg=vkbeautify.json(e.templateMsg,1)}else{b.resetTCData()}};b.resetTCData=function(){b.selectedTestCase="";b.testCaseName="";b.pan="";b.cResTemplateMsg="";b.reqPwdCnfrmScreen=false;b.reqADSScreen=false;b.reqPwdScreen=false;b.selectedReqScreen="";b.selectedTestCaseObj={};b.isExistingTC=false;b.sequence=""};b.setSelectedTCData=function(f){var e=b.testCases.map(function(g){return g.testCaseId}).indexOf(f);if(e!=-1){b.selectedTestCaseObj=b.testCases[e];b.setTestCaseData(b.selectedTestCaseObj)}else{b.resetTCData()}};b.submitTestCase=function(g){b.reqPwdScreen=false;b.reqADSScreen=false;console.log("sequence : "+b.sequence);var h={operationType:g,selectedTestCase:b.selectedTestCase,testCaseId:b.selectedTestCase,testCaseName:b.testCaseName,pan:b.pan,templateMsg:b.cResTemplateMsg,msgType:b.msgType,inAppTestCase:b.isInApp,sequence:b.sequence};b.loading=true;c.submit(h).then(function e(i){b.loading=false;a.showErrorAlert=false;a.showSuccessAlert=true;if(g=="create"){a.successMessage="ACSS CRes InApp test case '"+b.testCaseName+"' created"}else{if(g=="update"){a.successMessage="ACSS CRes InApp test case '"+b.testCaseName+"' updated";b.previousTestCase=b.selectedTestCase}else{if(g=="delete"){a.successMessage="ACSS CRes InApp  test case '"+b.testCaseName+"' deleted"}}}d.scrollTo(0,0);b.getTestCases()},function f(i){b.loading=false;a.showSuccessAlert=false;a.showErrorAlert=true;if(i.data.errorMessage){a.errorMessage=i.data.errorMessage}else{a.errorMessage="Transaction Failed"}d.scrollTo(0,0)})};b.deleteConfirm=function(){if(d.confirm("Are you sure you want to delete '"+b.testCaseName+"' test case")){b.submitTestCase("delete")}};b.jsonFormat=function(){var e=b.cResTemplateMsg;b.cResTemplateMsg=vkbeautify.json(e,1)};b.jsonUnformat=function(){var e=b.cResTemplateMsg;b.cResTemplateMsg=vkbeautify.jsonmin(e)}}]);