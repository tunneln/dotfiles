vendorLogMod.controller("ApproveDenyCOmplianceCtrl",["$scope","$rootScope","$state","$localStorage","VendorLogService","$window",function(d,a,f,e,b,h){d.vendorData=b.vendorData;d.success=false;d.loading=false;d.showDenialForm=false;d.denyLoading=false;d.showApprovedSuccess=false;d.showDeniayedSuccess=false;d.isPageLoading=false;console.log("$rootScope.complApprovalThroughEmail :: "+a.complApprovalThroughEmail);if(a.complApprovalThroughEmail==true){var g={enrollmentUUIDToken:a.token};d.isPageLoading=true;b.getVendorDataForComplReqApproval(g).then(function(i){d.vendorData=i.data;d.isPageLoading=false},function c(i){console.log("Failed to get the vendor Log data");d.isPageLoading=false})}d.approveComplLetterReq=function(){if(h.confirm("Are you sure you would like to approve this compliance request")){console.log("approving vendor first name :: "+d.vendorData.vendorFirstName);d.loading=true;b.approveVendorComplLetterReq(d.vendorData).then(function i(k){console.log("Successfully approved the vendor compliance letter.");d.loading=false;d.showApprovedSuccess=true},function j(k){console.log("Failed to approve the vendor compliance letter.");d.showApprovedSuccess=false;d.loading=false})}};d.confirmDeny=function(){if(h.confirm("Are you sure you would like to deny this compliance request.Please provide reason for denial(Notes section will be updated)(Eg: Denied as test cases are not complete or screenshots are not received")){d.showDenialForm=true}else{d.showDenialForm=false}};d.denyComplLetterReq=function(){d.denyLoading=true;b.denyVendorComplLetterReq(d.vendorData).then(function i(k){console.log("Successfully Denied the vendor compl Request.");d.showDenialForm=false;d.showDeniayedSuccess=true},function j(k){d.denyLoading=false;d.showDeniayedSuccess=false;console.log("Failed to Deny the vendor compl Request.")})};d.cancelDeny=function(){d.vendorData.denialNotes="";d.showDenialForm=false};d.backtoVendorLogScreen=function(){f.go("PIT2.vendorLog")}}]);