"use strict";var reviewReqTestResultsPIT2Mod=angular.module("ReviewReqTestResultsPIT2Mod",[]);reviewReqTestResultsPIT2Mod.controller("ReviewTestResultsPIT2Controller",["$scope","ReviewReqTestDataPIT2","PIT2ReviewService","$rootScope","$state",function(c,e,b,a,d){c.selectedComponent="ACS";c.isAdmin=a.isAdmin;c.isRegnAdmin=a.isRegnAdmin;c.title="ACS Testing Status";c.disableCmpnt=false;c.showgrid=false;c.errormsg=false;c.components=[];c.testTypes=[];c.selectedTestType="REQUIRED";if(c.isAdmin==false&&c.isRegnAdmin==false){c.tester=a.loggedInUser}if(a.userPit2ComponentType.length==1&&!c.isRegnAdmin){if(a.userAccess==ROLE_PIT2_ACS){c.components=[{name:"ACS",code:"ACS"}];c.selectedComponent="ACS";c.title="ACS Required Testing Status"}if(a.userAccess==ROLE_PIT2_MRCH){c.selectedComponent="MPI";c.components=[{name:"3DS Server",code:"MPI"}];c.title="3DS Server Required Testing Status"}}else{c.components=[{name:"ACS",code:"ACS"},{name:"3DS Server",code:"MPI"}]}c.testTypes=[{name:"Required",code:"REQUIRED"},{name:"Optional",code:"OPTIONAL"},{name:"All",code:"BOTH"}];c.currentPage=0;c.pageSize=10;c.data=[];c.datalgth=0;var f="";c.getFormData=function(){if(c.isAdmin==false&&c.isRegnAdmin==false){c.showgrid=true;c.loading=true;var i=c.selectedComponent;var h=c.selectedTestType;var j={testerName:angular.lowercase(c.tester),componentType:i,testType:h};e.getReviewReqTestResutls(j).then(function(k){c.pagedTests=k.reviewReqTestlist;c.datalgth=c.pagedTests.length;c.loading=false},function g(k){c.loading=false;c.pagedTests=[];c.datalgth=0})}};if(b.isReturn){b.isReturn=false;c.tester=b.email;c.selectedComponent=b.componentType;c.selectedTestType=b.testType;c.pagedTests=b.previousSearchResults;c.datalgth=c.pagedTests.length;c.showgrid=true;c.currentPage=b.currentPage;if(c.selectedComponent=="ACS"){c.title="ACS Testing Status";if(c.selectedTestType=="REQUIRED"){c.title="ACS Required Testing Status"}if(c.selectedTestType=="OPTIONAL"){c.title="ACS Optional Testing Status"}}else{if(c.selectedComponent=="MPI"){c.title="3DS Server Testing Status";if(c.selectedTestType=="REQUIRED"){c.title="3DS Server Required Testing Status"}if(c.selectedTestType=="OPTIONAL"){c.title="3DS Server Optional Testing Status"}}}}else{c.getFormData()}c.fetchData=function(){a.showErrorAlert=false;c.currentPage=0;var i=c.selectedComponent;var h=c.selectedTestType;var j={testerName:angular.lowercase(c.tester),componentType:i,testType:h};c.loading=true;e.getReviewReqTestResutls(j).then(function(k){if(k.reviewReqTestlist!=null&&k.reviewReqTestlist.length>0){c.pagedTests=k.reviewReqTestlist;c.datalgth=c.pagedTests.length;c.loading=false;c.showgrid=true}else{c.loading=false;c.pagedTests="";c.datalgth=0;c.errormsg=true}},function g(k){a.showErrorAlert=true;c.loading=false;c.pagedTests="";c.datalgth=0});if(i=="ACS"){if(h=="REQUIRED"){c.title="ACS Required Testing Status"}else{if(h=="OPTIONAL"){c.title="ACS Optional Testing Status"}else{c.title="ACS Testing Status"}}}if(i=="MPI"){if(h=="REQUIRED"){c.title="3DS Server Required Testing Status"}else{if(h=="OPTIONAL"){c.title="3DS Server Optional Testing Status"}else{c.title="3DS Server Testing Status"}}}};c.numberOfPages=function(){return Math.ceil(c.datalgth/c.pageSize)};c.prevPage=function(){if(c.currentPage>0){c.currentPage--}};c.nextPage=function(){if(c.currentPage<c.numberOfPages()){c.currentPage++}};c.setPage=function(){c.currentPage=this.n};c.tcDetails=function(h){var g=c.selectedComponent;b.reviewTestCase(h,g).success(function(j,i,k){b.data=j;if(g=="ACS"){d.go("PIT2.reviewACS")}else{d.go("PIT2.reviewMPI")}b.backActionState="PIT2.PIT2reviewRequiredResults";b.previousSearchResults=c.pagedTests;b.email=c.tester;b.componentType=c.selectedComponent;b.currentPage=c.currentPage;b.testType=c.selectedTestType;b.backBtn=false}).error(function(j,i){d.go("PIT2.PIT2reviewRequiredResults")})};c.runacsDetails=function(i,h,j,g){a.tcID=i;a.check=true;if(h=="ACS"&&j=="Y"){if(g=="VIPReq"){d.go("PIT2.ValidateCAVV")}else{d.go("PIT2.RequiredTestCases")}}if(h=="ACS"&&j=="N"){d.go("PIT2.OptionalTestCases")}}}]);reviewReqTestResultsPIT2Mod.filter("startFrom",function(){return function(a,b){if(!a||!a.length){return}b=+b;return a.slice(b)}});reviewReqTestResultsPIT2Mod.filter("htmlvw",["$sce",function(a){return function(b){return a.trustAsHtml(b)}}]);